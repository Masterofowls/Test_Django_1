# üèóÔ∏è –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å –Ω—É–ª—è ‚Äî –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

–ü–æ–ª–Ω–∞—è –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é Django –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ —Å –Ω—É–ª—è: –æ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Python –∏ PostgreSQL –¥–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —á–µ—Ç—ã—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π —Ä–æ–ª–µ–π, –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤, –∑–∞–∫–∞–∑–∞–º–∏ –∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#1-–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤](#2-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤)
3. [–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#3-—Å–æ–∑–¥–∞–Ω–∏–µ-–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
4. [–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Django-–ø—Ä–æ–µ–∫—Ç–∞](#4-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è-django-–ø—Ä–æ–µ–∫—Ç–∞)
5. [–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è bodies](#5-—Å–æ–∑–¥–∞–Ω–∏–µ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è-bodies)
6. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ config/settings.py](#6-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-configsettingspy)
7. [–°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (bodies/models.py)](#7-—Å–æ–∑–¥–∞–Ω–∏–µ-–º–æ–¥–µ–ª–µ–π-bodiesmodelspy)
8. [–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ä–º (bodies/forms.py)](#8-—Å–æ–∑–¥–∞–Ω–∏–µ-—Ñ–æ—Ä–º-bodiesformspy)
9. [–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π (bodies/views.py)](#9-—Å–æ–∑–¥–∞–Ω–∏–µ-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π-bodiesviewspy)
10. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ URL-–º–∞—Ä—à—Ä—É—Ç–æ–≤](#10-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-url-–º–∞—Ä—à—Ä—É—Ç–æ–≤)
11. [–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (bodies/admin.py)](#11-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è-–≤-–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏-bodiesadminpy)
12. [–°–∏–≥–Ω–∞–ª—ã Django (bodies/signals.py)](#12-—Å–∏–≥–Ω–∞–ª—ã-django-bodiessignalspy)
13. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (bodies/apps.py)](#13-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è-bodiesappspy)
14. [–°–æ–∑–¥–∞–Ω–∏–µ HTML-—à–∞–±–ª–æ–Ω–æ–≤](#14-—Å–æ–∑–¥–∞–Ω–∏–µ-html-—à–∞–±–ª–æ–Ω–æ–≤)
15. [–°–æ–∑–¥–∞–Ω–∏–µ management-–∫–æ–º–∞–Ω–¥](#15-—Å–æ–∑–¥–∞–Ω–∏–µ-management-–∫–æ–º–∞–Ω–¥)
16. [–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL](#16-—Å–æ–∑–¥–∞–Ω–∏–µ-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö-postgresql)
17. [–ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫](#17-–º–∏–≥—Ä–∞—Ü–∏–∏-–∏-–∑–∞–ø—É—Å–∫)
18. [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏](#18-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏)

---

## 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| **Python** | 3.12+ | –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è |
| **PostgreSQL** | 12+ | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| **pip** | –ü–æ—Å–ª–µ–¥–Ω—è—è | –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ Python |

---

## 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

### Windows

1. **Python** ‚Äî —Å–∫–∞—á–∞–π—Ç–µ —Å [python.org](https://www.python.org/downloads/). –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É **"Add Python to PATH"**.
2. **PostgreSQL** ‚Äî —Å–∫–∞—á–∞–π—Ç–µ —Å [postgresql.org](https://www.postgresql.org/download/windows/). –ó–∞–ø–æ–º–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `postgres`.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
python --version
# Python 3.12.x

psql --version
# psql (PostgreSQL) 16.x
```

---

## 3. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª (PowerShell –Ω–∞ Windows –∏–ª–∏ Terminal –Ω–∞ macOS/Linux).

```bash
# –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
mkdir example
cd example

# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
# Windows (PowerShell):
venv\Scripts\activate
# macOS/Linux:
source venv/bin/activate
```

–ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ `(venv)` –ø–µ—Ä–µ–¥ —Å—Ç—Ä–æ–∫–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª **`requirements.txt`** –≤ –∫–æ—Ä–Ω–µ –ø–∞–ø–∫–∏ `example/`:

```
Django==6.0.1
psycopg==3.1.18
openpyxl==3.1.5
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

| –ü–∞–∫–µ—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|-----------|
| `Django==6.0.1` | –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| `psycopg==3.1.18` | –î—Ä–∞–π–≤–µ—Ä PostgreSQL –¥–ª—è Python |
| `openpyxl==3.1.5` | –†–∞–±–æ—Ç–∞ —Å Excel-—Ñ–∞–π–ª–∞–º–∏ |

---

## 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Django-–ø—Ä–æ–µ–∫—Ç–∞

–ù–∞—Ö–æ–¥—è—Å—å –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ `example/`, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
django-admin startproject config .
```

> **–í–∞–∂–Ω–æ:** –¢–æ—á–∫–∞ (`.`) –≤ –∫–æ–Ω—Ü–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–µ, –∞ –Ω–µ –≤ –ø–æ–¥–ø–∞–ø–∫–µ.

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –ø–æ—è–≤—è—Ç—Å—è:

```
example/
‚îú‚îÄ‚îÄ manage.py        # CLI-—É—Ç–∏–ª–∏—Ç–∞ Django
‚îî‚îÄ‚îÄ config/          # –ü–∞–∫–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    ‚îú‚îÄ‚îÄ __init__.py  # –ü—É—Å—Ç–æ–π —Ñ–∞–π–ª ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –ø–∞–∫–µ—Ç Python
    ‚îú‚îÄ‚îÄ settings.py  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
    ‚îú‚îÄ‚îÄ urls.py      # –ì–ª–∞–≤–Ω—ã–µ URL-–º–∞—Ä—à—Ä—É—Ç—ã
    ‚îú‚îÄ‚îÄ asgi.py      # ASGI —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
    ‚îî‚îÄ‚îÄ wsgi.py      # WSGI —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª

- **`manage.py`** ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ Django (`runserver`, `migrate`, `createsuperuser` –∏ –¥—Ä.)
- **`config/__init__.py`** ‚Äî –ü—É—Å—Ç–æ–π —Ñ–∞–π–ª, –ø–æ–º–µ—á–∞—é—â–∏–π `config/` –∫–∞–∫ Python-–ø–∞–∫–µ—Ç
- **`config/settings.py`** ‚Äî –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —à–∞–±–ª–æ–Ω—ã –∏ —Ç.–¥.)
- **`config/urls.py`** ‚Äî –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è URL-–∞–¥—Ä–µ—Å–æ–≤ –∫ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º
- **`config/wsgi.py`** ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è WSGI-—Å–µ—Ä–≤–µ—Ä–æ–≤ (Gunicorn, uWSGI)
- **`config/asgi.py`** ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è ASGI-—Å–µ—Ä–≤–µ—Ä–æ–≤ (Daphne, Uvicorn)

---

## 5. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è bodies

Django-–ø—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –°–æ–∑–¥–∞–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `bodies`:

```bash
python manage.py startapp bodies
```

–ü–æ—è–≤–∏—Ç—Å—è –ø–∞–ø–∫–∞ `bodies/`:

```
bodies/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ admin.py        # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
‚îú‚îÄ‚îÄ apps.py         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ migrations/     # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ models.py       # –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ tests.py        # –¢–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ views.py        # –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã)
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–π—Ç–µ:

```bash
# –ü–∞–ø–∫–∞ –¥–ª—è HTML-—à–∞–±–ª–æ–Ω–æ–≤
mkdir bodies/templates

# –ü–∞–ø–∫–∞ –¥–ª—è management-–∫–æ–º–∞–Ω–¥
mkdir -p bodies/management/commands

# –ü—É—Å—Ç—ã–µ __init__.py —Ñ–∞–π–ª—ã –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤ Python
# (bodies/management/__init__.py —É–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω mkdir -p, –Ω–æ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
touch bodies/management/__init__.py
touch bodies/management/commands/__init__.py
```

> **Windows:** –í–º–µ—Å—Ç–æ `touch` —Å–æ–∑–¥–∞–π—Ç–µ –ø—É—Å—Ç—ã–µ —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é (–ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí –°–æ–∑–¥–∞—Ç—å ‚Üí –¢–µ–∫—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç, –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤ `__init__.py`), –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
> ```powershell
> echo. > bodies\management\__init__.py
> echo. > bodies\management\commands\__init__.py
> ```

–¢–∞–∫–∂–µ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ Django –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- **`bodies/forms.py`** ‚Äî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ–æ—Ä–º—ã
- **`bodies/signals.py`** ‚Äî –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ Django
- **`bodies/urls.py`** ‚Äî URL-–º–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

## 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ config/settings.py

–û—Ç–∫—Ä–æ–π—Ç–µ `config/settings.py` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞:

```python
"""
Django settings for back project.

Generated by 'django-admin startproject' using Django 6.0.1.

For more information on this file, see
https://docs.djangoproject.com/en/6.0/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/6.0/ref/settings/
"""

from pathlib import Path

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent


# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/6.0/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = 'django-insecure-%p0t$hgp_wnb#nbu*-*odc$+t48i0!)9)pz3z*&vdmmqb$&*1k'

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = True

ALLOWED_HOSTS = []


# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    
    'bodies',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'config.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'config.wsgi.application'


# Database
# https://docs.djangoproject.com/en/6.0/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'shop',
        'USER': 'postgres',
        'PASSWORD': 'postgres',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}


# Password validation
# https://docs.djangoproject.com/en/6.0/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/6.0/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/6.0/howto/static-files/

STATIC_URL = 'static/'

# Default primary key field type
# https://docs.djangoproject.com/en/6.0/ref/settings/#default-auto-field

DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'
```

### –ß—Ç–æ –º—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏

| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|----------|
| `INSTALLED_APPS` | `+ 'bodies'` | –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏ –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ |
| `DATABASES` | PostgreSQL | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `shop`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `postgres` |
| `ROOT_URLCONF` | `'config.urls'` | –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –º–∞—Ä—à—Ä—É—Ç–æ–≤ |
| `APP_DIRS` | `True` | Django –∏—â–µ—Ç —à–∞–±–ª–æ–Ω—ã –≤ `templates/` –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π |
| `DEBUG` | `True` | –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏) |

> **‚ö†Ô∏è –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:** –∑–∞–º–µ–Ω–∏—Ç–µ `SECRET_KEY` –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `DEBUG = False`, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `ALLOWED_HOSTS`.

---

## 7. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (bodies/models.py)

–ú–æ–¥–µ–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –û—Ç–∫—Ä–æ–π—Ç–µ `bodies/models.py` –∏ –∑–∞–ø–∏—à–∏—Ç–µ:

```python
import random
import string
from django.db import models
from django.contrib.auth.models import User


def generate_receive_code():
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞"""
    return ''.join(random.choices(string.ascii_uppercase + string.digits, k=6))


class Product(models.Model):
    """–ú–æ–¥–µ–ª—å —Ç–æ–≤–∞—Ä–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ"""
    name        = models.CharField(max_length=255, verbose_name="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞")
    price       = models.DecimalField(max_digits=10, decimal_places=2, verbose_name="–¶–µ–Ω–∞ (—Ä—É–±.)")
    description = models.TextField(blank=True, verbose_name="–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞")
    sku         = models.CharField(max_length=50, unique=True, verbose_name="–ê—Ä—Ç–∏–∫—É–ª")

    class Meta:
        verbose_name = "–¢–æ–≤–∞—Ä"
        verbose_name_plural = "–¢–æ–≤–∞—Ä—ã"
        ordering = ['-id']

    def __str__(self):
        return f"{self.name} ({self.sku})"


class PickupPoint(models.Model):
    """–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤"""
    address = models.CharField(max_length=500, verbose_name="–ê–¥—Ä–µ—Å –ø—É–Ω–∫—Ç–∞ –≤—ã–¥–∞—á–∏")

    class Meta:
        verbose_name = "–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏"
        verbose_name_plural = "–ü—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏"

    def __str__(self):
        return self.address


class Order(models.Model):
    """–ó–∞–∫–∞–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    STATUS_CHOICES = [
        ('new', '–ù–æ–≤—ã–π'),
        ('delivered', '–ó–∞–≤–µ—Ä—à–µ–Ω'),
    ]
    
    user         = models.ForeignKey(User, on_delete=models.CASCADE, related_name="orders", verbose_name="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å")
    products     = models.ManyToManyField(Product, verbose_name="–¢–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ")
    createdAt    = models.DateTimeField(auto_now_add=True, verbose_name="–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞")
    deliveryDate = models.DateTimeField(null=True, blank=True, verbose_name="–î–∞—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏")
    receiveCode  = models.CharField(max_length=10, default=generate_receive_code, verbose_name="–ö–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è")
    pickupPoint  = models.ForeignKey(PickupPoint, on_delete=models.SET_NULL, null=True, verbose_name="–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏")
    status       = models.CharField(max_length=20, choices=STATUS_CHOICES, default='new', verbose_name="–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞")

    class Meta:
        verbose_name = "–ó–∞–∫–∞–∑"
        verbose_name_plural = "–ó–∞–∫–∞–∑—ã"
        ordering = ['-createdAt']

    def __str__(self):
        user_name = self.user.get_full_name() or self.user.username
        return f"–ó–∞–∫–∞–∑ #{self.id} - {user_name}"
    
    def get_skus(self):
        """–ü–æ–ª—É—á–∏—Ç—å –∞—Ä—Ç–∏–∫—É–ª—ã –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–∫–∞–∑–µ"""
        return ', '.join([p.sku for p in self.products.all()])


class Profile(models.Model):
    """–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—å—é"""
    ROLE_CHOICES = [
        ('unauthorized', '–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π'),
        ('authorized', '–ê–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π'),
        ('editor', '–†–µ–¥–∞–∫—Ç–æ—Ä'),
        ('admin', '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä'),
    ]
    
    user = models.OneToOneField(User, on_delete=models.CASCADE, verbose_name="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å")
    role = models.CharField(max_length=20, choices=ROLE_CHOICES, default='authorized', verbose_name="–†–æ–ª—å")

    class Meta:
        verbose_name = "–ü—Ä–æ—Ñ–∏–ª—å"
        verbose_name_plural = "–ü—Ä–æ—Ñ–∏–ª–∏"

    def __str__(self):
        return f"{self.user.username} ({self.get_role_display()})"
    
    def is_admin(self):
        return self.role == 'admin'
    
    def is_editor(self):
        return self.role in ['editor', 'admin']
    
    def is_authorized(self):
        return self.role in ['authorized', 'editor', 'admin']
```

### –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

| –ú–æ–¥–µ–ª—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è |
|--------|-----------|---------------|
| **Product** | –¢–æ–≤–∞—Ä –≤ –∫–∞—Ç–∞–ª–æ–≥–µ | `name`, `price`, `description`, `sku` (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π) |
| **PickupPoint** | –ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤ | `address` |
| **Order** | –ó–∞–∫–∞–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `user` (FK‚ÜíUser), `products` (M2M‚ÜíProduct), `status`, `receiveCode` |
| **Profile** | –ü—Ä–æ—Ñ–∏–ª—å —Å —Ä–æ–ª—å—é | `user` (1-–∫-1‚ÜíUser), `role` (4 —É—Ä–æ–≤–Ω—è) |

### –°–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏

```
User ‚Üê‚Üí Profile     (1:1 ‚Äî —É –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–¥–∏–Ω –ø—Ä–æ—Ñ–∏–ª—å)
User ‚Üí Order         (1:N ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –º–Ω–æ–≥–æ –∑–∞–∫–∞–∑–æ–≤)
Order ‚Üî Product      (M:N ‚Äî –∑–∞–∫–∞–∑ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤, —Ç–æ–≤–∞—Ä –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–∫–∞–∑–∞—Ö)
Order ‚Üí PickupPoint  (N:1 ‚Äî –º–Ω–æ–≥–æ –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ –æ–¥–∏–Ω –ø—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏)
```

### –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (4 —É—Ä–æ–≤–Ω—è)

| –†–æ–ª—å | –ü—Ä–∞–≤–∞ |
|------|-------|
| `unauthorized` | –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤ |
| `authorized` | + –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ |
| `editor` | + –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ |
| `admin` | + –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ |

---

## 8. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ä–º (bodies/forms.py)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/forms.py`:

```python
# -*- coding: utf-8 -*-
"""
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ–æ—Ä–º—ã –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è bodies
"""

from django import forms
from django.contrib.auth.models import User
from django.core.exceptions import ValidationError


class SimplifiedUserCreationForm(forms.ModelForm):
    """
    –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –±–æ–ª–µ–µ –º—è–≥–∫–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫ –ø–∞—Ä–æ–ª—é
    """
    password1 = forms.CharField(
        label="–ü–∞—Ä–æ–ª—å",
        widget=forms.PasswordInput(attrs={'class': 'form-control', 'placeholder': '–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å'}),
        min_length=4,
        help_text="–ú–∏–Ω–∏–º—É–º 4 —Å–∏–º–≤–æ–ª–∞"
    )
    password2 = forms.CharField(
        label="–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è",
        widget=forms.PasswordInput(attrs={'class': 'form-control', 'placeholder': '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å'}),
        min_length=4,
        help_text="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –µ—â—ë —Ä–∞–∑"
    )
    
    username = forms.CharField(
        label="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
        max_length=150,
        widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': '–í—ã–±–µ—Ä–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è'}),
        help_text="–¢–æ–ª—å–∫–æ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ @/./+/-/_"
    )
    
    class Meta:
        model = User
        fields = ('username',)
    
    def clean_username(self):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        username = self.cleaned_data.get('username')
        
        if not username:
            raise ValidationError("–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
        
        if User.objects.filter(username=username).exists():
            raise ValidationError(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∏–º–µ–Ω–µ–º '{username}' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")
        
        return username
    
    def clean(self):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª–µ–π –∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ"""
        cleaned_data = super().clean()
        password1 = cleaned_data.get("password1")
        password2 = cleaned_data.get("password2")
        
        if password1 and password2:
            if password1 != password2:
                raise ValidationError("–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!")
        
        return cleaned_data
    
    def save(self, commit=True):
        """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–∞—Ä–æ–ª–µ–º"""
        user = super().save(commit=False)
        user.set_password(self.cleaned_data['password1'])
        if commit:
            user.save()
        return user
```

### –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —ç—Ç–∞ —Ñ–æ—Ä–º–∞

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ñ–æ—Ä–º–∞ Django (`UserCreationForm`) —Ç—Ä–µ–±—É–µ—Ç –ø–∞—Ä–æ–ª—å –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤, —Å —Ü–∏—Ñ—Ä–∞–º–∏ –∏ –±—É–∫–≤–∞–º–∏. –ù–∞—à–∞ —Ñ–æ—Ä–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø—Ä–æ—Å—Ç—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `admin`/`admin`).

---

## 9. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π (bodies/views.py)

–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (views) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—Ç–≤–µ—Ç—ã. –û—Ç–∫—Ä–æ–π—Ç–µ `bodies/views.py` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```python
from django.shortcuts import render, redirect, get_object_or_404
from django.contrib.auth.forms import UserCreationForm
from django.contrib.auth import login, logout, authenticate
from django.contrib.auth.decorators import login_required
from django.http import HttpResponseForbidden
from django.views.decorators.http import require_http_methods
from .models import Product, PickupPoint, Order, Profile
from .forms import SimplifiedUserCreationForm


def get_user_role(user):
    """–ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    if not user.is_authenticated:
        return 'unauthorized'
    try:
        return user.profile.role
    except Profile.DoesNotExist:
        # –ï—Å–ª–∏ –ø—Ä–æ—Ñ–∏–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
        profile = Profile.objects.create(user=user, role='authorized')
        return profile.role


def require_role(allowed_roles):
    """–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    def decorator(view_func):
        def wrapper(request, *args, **kwargs):
            user_role = get_user_role(request.user)
            if user_role not in allowed_roles:
                return HttpResponseForbidden("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ")
            return view_func(request, *args, **kwargs)
        return wrapper
    return decorator


def product_list(request):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    user_role = get_user_role(request.user)
    
    # –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
    products = Product.objects.all()
    
    # –ê–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π/–†–µ–¥–∞–∫—Ç–æ—Ä/–ê–¥–º–∏–Ω –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
    if user_role in ['authorized', 'editor', 'admin']:
        search = request.GET.get('search', '')
        price_min = request.GET.get('price_min', '')
        price_max = request.GET.get('price_max', '')
        
        if search:
            products = products.filter(name__icontains=search) | products.filter(description__icontains=search)
        if price_min:
            try:
                products = products.filter(price__gte=float(price_min))
            except ValueError:
                pass
        if price_max:
            try:
                products = products.filter(price__lte=float(price_max))
            except ValueError:
                pass
    
    context = {
        'products': products,
        'user_role': user_role,
        'show_edit': user_role in ['editor', 'admin'],
        'show_delete': user_role == 'admin',
        'show_add_product': user_role == 'admin',
    }
    return render(request, 'products.html', context)


def register_view(request):
    """–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    if request.method == 'POST':
        form = SimplifiedUserCreationForm(request.POST)
        if form.is_valid():
            try:
                user = form.save()
                # –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å —Å —Ä–æ–ª—å—é –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ –ø—Ä–æ—Ñ–∏–ª—å
                profile, created = Profile.objects.get_or_create(
                    user=user,
                    defaults={'role': 'authorized'}
                )
                if created:
                    print(f"‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —Å–æ–∑–¥–∞–Ω –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user.username}")
                else:
                    print(f"‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user.username}")
                
                login(request, user)
                print(f"‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user.username} —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∏ –≤–æ—à–µ–ª –≤ —Å–∏—Å—Ç–µ–º—É")
                return redirect('product_list')
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è: {e}")
                form.add_error(None, f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è: {str(e)}")
        else:
            print(f"‚ùå –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã: {form.errors}")
    else:
        form = SimplifiedUserCreationForm()
    
    return render(request, 'register.html', {'form': form})


def login_view(request):
    """–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É"""
    if request.method == 'POST':
        username = request.POST.get('username', '').strip()
        password = request.POST.get('password', '').strip()
        
        print(f"üîê –ü–æ–ø—ã—Ç–∫–∞ –≤—Ö–æ–¥–∞: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å '{username}'")
        
        if not username or not password:
            error = '–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä–æ–ª—å'
            print(f"‚ùå {error}")
            return render(request, 'login.html', {'error': error})
        
        user = authenticate(request, username=username, password=password)
        if user is not None:
            login(request, user)
            print(f"‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {username} —É—Å–ø–µ—à–Ω–æ –≤–æ—à–µ–ª –≤ —Å–∏—Å—Ç–µ–º—É")
            return redirect('product_list')
        else:
            error = '–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å'
            print(f"‚ùå {error} –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è '{username}'")
            return render(request, 'login.html', {'error': error})
    return render(request, 'login.html')


def logout_view(request):
    """–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã"""
    logout(request)
    return redirect('product_list')


@login_required(login_url='login')
@require_role(['authorized', 'editor', 'admin'])
def order_list(request):
    """–ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    orders = Order.objects.filter(user=request.user)
    return render(request, 'order_list.html', {'orders': orders})


@login_required(login_url='login')
@require_role(['authorized', 'editor', 'admin'])
def create_order(request, product_id, pickup_point_id):
    """–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑"""
    product      = get_object_or_404(Product, id=product_id)
    pickup_point = get_object_or_404(PickupPoint, id=pickup_point_id)
    
    order = Order.objects.create(user=request.user, pickupPoint=pickup_point)
    order.products.add(product)
    
    return redirect('order_list')


@login_required(login_url='login')
@require_role(['editor', 'admin'])
def edit_product(request, product_id):
    """–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä"""
    product = get_object_or_404(Product, id=product_id)
    
    if request.method == 'POST':
        product.name = request.POST.get('name', product.name)
        product.price = request.POST.get('price', product.price)
        product.description = request.POST.get('description', product.description)
        product.sku = request.POST.get('sku', product.sku)
        product.save()
        return redirect('product_list')
    
    return render(request, 'edit_product.html', {'product': product})


@login_required(login_url='login')
@require_role(['admin'])
def delete_product(request, product_id):
    """–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä"""
    product = get_object_or_404(Product, id=product_id)
    
    if request.method == 'POST':
        product.delete()
        return redirect('product_list')
    
    return render(request, 'confirm_delete.html', {'object': product, 'object_type': '—Ç–æ–≤–∞—Ä–∞'})


@login_required(login_url='login')
@require_role(['admin'])
def add_product(request):
    """–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä"""
    if request.method == 'POST':
        product = Product.objects.create(
            name=request.POST.get('name', ''),
            price=request.POST.get('price', 0),
            description=request.POST.get('description', ''),
            sku=request.POST.get('sku', '')
        )
        return redirect('product_list')
    
    return render(request, 'add_product.html')


@login_required(login_url='login')
@require_role(['admin'])
def manage_users(request):
    """–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–ø–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞)"""
    from django.contrib.auth.models import User
    users = User.objects.all()
    return render(request, 'manage_users.html', {'users': users})


@login_required(login_url='login')
@require_role(['admin'])
def edit_user_role(request, user_id):
    """–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    from django.contrib.auth.models import User
    user = get_object_or_404(User, id=user_id)
    profile = user.profile
    
    if request.method == 'POST':
        new_role = request.POST.get('role')
        profile.role = new_role
        profile.save()
        return redirect('manage_users')
    
    return render(request, 'edit_user_role.html', {'user': user, 'profile': profile})


@login_required(login_url='login')
@require_role(['admin'])
def delete_user(request, user_id):
    """–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    from django.contrib.auth.models import User
    user = get_object_or_404(User, id=user_id)
    
    if request.user.id == user_id:
        return HttpResponseForbidden("–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç")
    
    if request.method == 'POST':
        user.delete()
        return redirect('manage_users')
    
    return render(request, 'confirm_delete.html', {'object': user, 'object_type': '–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è'})
```

### –û–±–∑–æ—Ä –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π

| –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ | URL | –î–æ—Å—Ç—É–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|-----|--------|----------|
| `product_list` | `/` | –í—Å–µ | –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö) |
| `register_view` | `/register/` | –í—Å–µ | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `login_view` | `/login/` | –í—Å–µ | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É |
| `logout_view` | `/logout/` | –í—Å–µ | –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã |
| `order_list` | `/orders/` | authorized+ | –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `create_order` | `/buy/<id>/<point>/` | authorized+ | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ |
| `edit_product` | `/product/<id>/edit/` | editor+ | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ |
| `add_product` | `/product/add/` | admin | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ |
| `delete_product` | `/product/<id>/delete/` | admin | –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ |
| `manage_users` | `/users/` | admin | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `edit_user_role` | `/user/<id>/edit-role/` | admin | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `delete_user` | `/user/<id>/delete/` | admin | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- **`get_user_role(user)`** ‚Äî –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`'unauthorized'` –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö)
- **`require_role(roles)`** ‚Äî –î–µ–∫–æ—Ä–∞—Ç–æ—Ä, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π, —á—Ç–æ —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—Ö–æ–¥–∏—Ç –≤ —Å–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö

---

## 10. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ URL-–º–∞—Ä—à—Ä—É—Ç–æ–≤

### 10.1. –ì–ª–∞–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã ‚Äî config/urls.py

–û—Ç–∫—Ä–æ–π—Ç–µ `config/urls.py` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```python
"""
URL configuration for back project.

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/6.0/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  path('', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.urls import include, path
    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))
"""
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('bodies.urls')),
]
```

### 10.2. –ú–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Äî bodies/urls.py

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/urls.py`:

```python
from django.urls import path
from django.contrib.auth import views as auth_views
from . import views

urlpatterns = [
    path('',                          views.product_list,  name='product_list'),
    path('register/',                 views.register_view, name='register'),
    path('login/',                    views.login_view,    name='login'),
    path('logout/',                   views.logout_view,   name='logout'),
    path('orders/',                   views.order_list,    name='order_list'),
    path('buy/<int:product_id>/<int:pickup_point_id>/',
         views.create_order, name='create_order'),
    
    # –†–µ–¥–∞–∫—Ç–æ—Ä –∏ –∞–¥–º–∏–Ω - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
    path('product/<int:product_id>/edit/', views.edit_product, name='edit_product'),
    path('product/add/', views.add_product, name='add_product'),
    
    # –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω - —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
    path('product/<int:product_id>/delete/', views.delete_product, name='delete_product'),
    path('users/', views.manage_users, name='manage_users'),
    path('user/<int:user_id>/edit-role/', views.edit_user_role, name='edit_user_role'),
    path('user/<int:user_id>/delete/', views.delete_user, name='delete_user'),
]
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

1. –ó–∞–ø—Ä–æ—Å –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, `http://127.0.0.1:8000/orders/`)
2. Django –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `config/urls.py` ‚Äî –Ω–∞—Ö–æ–¥–∏—Ç `path('', include('bodies.urls'))`
3. –î–∞–ª–µ–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `bodies/urls.py` ‚Äî –Ω–∞—Ö–æ–¥–∏—Ç `path('orders/', views.order_list, name='order_list')`
4. –í—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `order_list()` –∏–∑ `bodies/views.py`

---

## 11. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (bodies/admin.py)

–û—Ç–∫—Ä–æ–π—Ç–µ `bodies/admin.py` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```python
from django.contrib import admin
from .models import Product, PickupPoint, Order, Profile


@admin.register(Product)
class ProductAdmin(admin.ModelAdmin):
    list_display = ('name', 'sku', 'price')
    search_fields = ('name', 'sku')
    list_filter = ('price',)


@admin.register(PickupPoint)
class PickupPointAdmin(admin.ModelAdmin):
    list_display = ('address',)


@admin.register(Order)
class OrderAdmin(admin.ModelAdmin):
    list_display = ('id', 'user', 'status', 'createdAt', 'receiveCode')
    list_filter = ('status', 'createdAt')
    search_fields = ('user__username', 'receiveCode')
    readonly_fields = ('createdAt', 'receiveCode')


@admin.register(Profile)
class ProfileAdmin(admin.ModelAdmin):
    list_display = ('user', 'role')
    list_filter = ('role',)
```

### –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

| –ú–æ–¥–µ–ª—å | list_display | –ü–æ–∏—Å–∫ | –§–∏–ª—å—Ç—Ä—ã |
|--------|-------------|-------|---------|
| **Product** | –ù–∞–∑–≤–∞–Ω–∏–µ, –ê—Ä—Ç–∏–∫—É–ª, –¶–µ–Ω–∞ | –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –∞—Ä—Ç–∏–∫—É–ª—É | –ü–æ —Ü–µ–Ω–µ |
| **PickupPoint** | –ê–¥—Ä–µ—Å | ‚Äî | ‚Äî |
| **Order** | ‚Ññ, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –°—Ç–∞—Ç—É—Å, –î–∞—Ç–∞, –ö–æ–¥ | –ü–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –∫–æ–¥—É | –ü–æ —Å—Ç–∞—Ç—É—Å—É –∏ –¥–∞—Ç–µ |
| **Profile** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –†–æ–ª—å | ‚Äî | –ü–æ —Ä–æ–ª–∏ |

---

## 12. –°–∏–≥–Ω–∞–ª—ã Django (bodies/signals.py)

–°–∏–≥–Ω–∞–ª—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö –≤ Django. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/signals.py`:

```python
from django.db.models.signals import post_save
from django.dispatch import receiver
from django.contrib.auth.models import User
from .models import Profile


@receiver(post_save, sender=User)
def create_user_profile(sender, instance, created, **kwargs):
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    if created:
        Profile.objects.get_or_create(user=instance, defaults={'role': 'authorized'})


@receiver(post_save, sender=User)
def save_user_profile(sender, instance, **kwargs):
    """–°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    if hasattr(instance, 'profile'):
        instance.profile.save()
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ö–æ–≥–¥–∞ –Ω–æ–≤—ã–π `User` —Å–æ–∑–¥–∞—ë—Ç—Å—è (—á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, admin, –∏–ª–∏ `createsuperuser`), —Å–∏–≥–Ω–∞–ª `post_save` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. –°–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç `Profile` —Å —Ä–æ–ª—å—é `'authorized'`
2. –°–≤—è–∑—ã–≤–∞–µ—Ç –µ–≥–æ —Å —Å–æ–∑–¥–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

> **–ó–∞—á–µ–º:** –ß—Ç–æ–±—ã –Ω–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

## 13. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (bodies/apps.py)

–û—Ç–∫—Ä–æ–π—Ç–µ `bodies/apps.py` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```python
from django.apps import AppConfig


class BodiesConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'bodies'
    
    def ready(self):
        import bodies.signals
```

### –ó–∞—á–µ–º –º–µ—Ç–æ–¥ `ready()`

–ú–µ—Ç–æ–¥ `ready()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ Django. –°—Ç—Ä–æ–∫–∞ `import bodies.signals` –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –Ω–∞—à–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤, –∏–Ω–∞—á–µ –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

---

## 14. –°–æ–∑–¥–∞–Ω–∏–µ HTML-—à–∞–±–ª–æ–Ω–æ–≤

–í—Å–µ —à–∞–±–ª–æ–Ω—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ `bodies/templates/`. Django –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥—ë—Ç –∏—Ö, –ø–æ—Ç–æ–º—É —á—Ç–æ `APP_DIRS = True` –≤ settings.py.

### 14.1. products.html ‚Äî –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/templates/products.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        
        header { background: white; padding: 20px; border-radius: 5px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h1 { color: #333; margin-bottom: 10px; }
        
        nav { display: flex; gap: 15px; align-items: center; flex-wrap: wrap; }
        nav a, nav span { text-decoration: none; color: #007bff; font-weight: bold; }
        nav a:hover { text-decoration: underline; }
        nav span { color: #666; }
        
        .admin-controls { margin-top: 15px; display: flex; gap: 10px; }
        .btn-admin { background: #dc3545; color: white; padding: 10px 15px; border-radius: 5px; text-decoration: none; font-weight: bold; }
        .btn-admin:hover { background: #c82333; }
        .btn-users { background: #28a745; color: white; }
        .btn-users:hover { background: #218838; }
        
        .filter-section { background: white; padding: 20px; border-radius: 5px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .filter-section h3 { margin-bottom: 15px; color: #333; }
        .filter-form { display: flex; gap: 10px; flex-wrap: wrap; align-items: flex-end; }
        .filter-form input { padding: 8px; border: 1px solid #ddd; border-radius: 3px; }
        .filter-form button { padding: 8px 15px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; font-weight: bold; }
        .filter-form button:hover { background: #0056b3; }
        .filter-form .btn-clear { background: #6c757d; }
        .filter-form .btn-clear:hover { background: #5a6268; }
        
        .products { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .product { background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: relative; }
        .product h3 { margin-bottom: 10px; color: #333; font-size: 18px; }
        .product p { color: #666; font-size: 14px; margin: 5px 0; }
        .price { font-size: 20px; font-weight: bold; color: #28a745; margin: 10px 0; }
        
        .btn { display: inline-block; background: #007bff; color: white; padding: 8px 12px; border-radius: 3px; text-decoration: none; margin-top: 10px; cursor: pointer; border: none; font-size: 14px; }
        .btn:hover { background: #0056b3; }
        
        .product-actions { display: flex; gap: 8px; margin-top: 10px; flex-wrap: wrap; }
        .btn-edit { background: #28a745; }
        .btn-edit:hover { background: #218838; }
        .btn-delete { background: #dc3545; }
        .btn-delete:hover { background: #c82333; }
        
        .role-badge { display: inline-block; background: #667eea; color: white; padding: 5px 10px; border-radius: 20px; font-size: 12px; font-weight: bold; }
        
        .empty { text-align: center; padding: 40px; background: white; border-radius: 5px; color: #999; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üõçÔ∏è –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω</h1>
            <nav>
                {% if user.is_authenticated %}
                    <span>üë§ {{ user.username }}</span>
                    <span class="role-badge">{{ user.profile.get_role_display }}</span>
                    <a href="{% url 'order_list' %}">üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã</a>
                    {% if show_edit or show_delete %}
                        <a href="{% url 'manage_users' %}">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
                    {% endif %}
                    <a href="{% url 'logout' %}">üö™ –í—ã—Ö–æ–¥</a>
                {% else %}
                    <span style="color: #999;">–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω—ã</span>
                    <a href="{% url 'login' %}">üîì –í—Ö–æ–¥</a>
                    <a href="{% url 'register' %}">‚úçÔ∏è –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% endif %}
            </nav>
            
            {% if show_add_product %}
                <div class="admin-controls">
                    <a href="{% url 'add_product' %}" class="btn-admin">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</a>
                </div>
            {% endif %}
        </header>

        {% if user.is_authenticated and user.profile.is_authorized %}
            <div class="filter-section">
                <h3>üîç –§–∏–ª—å—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤</h3>
                <form method="get" class="filter-form">
                    <input type="text" name="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." value="{{ request.GET.search }}">
                    <input type="number" name="price_min" placeholder="–¶–µ–Ω–∞ –æ—Ç (‚ÇΩ)" value="{{ request.GET.price_min }}" min="0" step="0.01">
                    <input type="number" name="price_max" placeholder="–¶–µ–Ω–∞ –¥–æ (‚ÇΩ)" value="{{ request.GET.price_max }}" min="0" step="0.01">
                    <button type="submit">üîé –ù–∞–π—Ç–∏</button>
                    <a href="{% url 'product_list' %}"><button type="button" class="btn-clear">‚úñ –°–±—Ä–æ—Å–∏—Ç—å</button></a>
                </form>
            </div>
        {% endif %}

        {% if products %}
            <div class="products">
                {% for product in products %}
                    <div class="product">
                        <h3>{{ product.name }}</h3>
                        <p><strong>SKU:</strong> {{ product.sku }}</p>
                        <p>{{ product.description }}</p>
                        <div class="price">{{ product.price }} ‚ÇΩ</div>
                        
                        <div class="product-actions">
                            {% if user.is_authenticated and user.profile.is_authorized %}
                                <a href="{% url 'create_order' product.id 1 %}" class="btn">–ó–∞–∫–∞–∑–∞—Ç—å</a>
                            {% elif user.is_authenticated %}
                                <p style="color: #999; font-size: 12px;">–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤–∞—à–µ–π —Ä–æ–ª–∏</p>
                            {% else %}
                                <p style="color: #999; font-size: 12px;">–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –∑–∞–∫–∞–∑–∞—Ç—å</p>
                            {% endif %}
                            
                            {% if show_edit %}
                                <a href="{% url 'edit_product' product.id %}" class="btn btn-edit">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                            {% endif %}
                            
                            {% if show_delete %}
                                <a href="{% url 'delete_product' product.id %}" class="btn btn-delete">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty">
                <p>üì≠ –¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                {% if show_add_product %}
                    <p style="font-size: 12px; margin-top: 10px;"><a href="{% url 'add_product' %}" style="color: #007bff;">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Ç–æ–≤–∞—Ä</a></p>
                {% else %}
                    <p style="font-size: 12px; margin-top: 10px;">–¢–æ–≤–∞—Ä—ã –¥–æ–±–∞–≤—è—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º</p>
                {% endif %}
            </div>
        {% endif %}
    </div>
</body>
</html>
```

### 14.2. register.html ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/templates/register.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Arial, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
        }
        .form-container { 
            background: white; 
            padding: 40px; 
            border-radius: 10px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.2); 
            width: 100%; 
            max-width: 400px; 
        }
        h1 { 
            text-align: center; 
            margin-bottom: 30px; 
            color: #333; 
            font-size: 24px; 
        }
        form { 
            display: flex; 
            flex-direction: column; 
        }
        label { 
            margin-top: 15px; 
            font-weight: bold; 
            color: #333; 
            font-size: 14px; 
        }
        input { 
            padding: 10px; 
            margin-top: 5px; 
            border: 1px solid #ddd; 
            border-radius: 5px; 
            font-size: 14px; 
        }
        input:focus { 
            outline: none; 
            border-color: #667eea; 
            box-shadow: 0 0 5px rgba(102, 126, 234, 0.3); 
        }
        button { 
            margin-top: 20px; 
            padding: 12px; 
            background: #28a745; 
            color: white; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 16px; 
            font-weight: bold; 
        }
        button:hover { 
            background: #218838; 
        }
        .link { 
            text-align: center; 
            margin-top: 20px; 
        }
        .link a { 
            color: #667eea; 
            text-decoration: none; 
        }
        .link a:hover { 
            text-decoration: underline; 
        }
        .help-text { 
            font-size: 12px; 
            color: #999; 
            margin-top: 5px; 
        }
        ul { 
            list-style: none; 
            padding: 0; 
        }
        li { 
            color: #666; 
            font-size: 12px; 
            margin: 5px 0; 
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            box-sizing: border-box;
        }
        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 5px rgba(102, 126, 234, 0.3);
        }
        .error-message {
            color: #dc3545;
            font-size: 12px;
            margin-top: 5px;
        }
        .help-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            border: 1px solid #c3e6cb;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>‚úçÔ∏è –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
        {% if form.non_field_errors %}
            <div style="background: #f8d7da; color: #721c24; padding: 10px; border-radius: 5px; margin-bottom: 15px; border: 1px solid #f5c6cb;">
                <strong>–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong>
                {% for error in form.non_field_errors %}
                    <p style="margin: 5px 0;">‚Ä¢ {{ error }}</p>
                {% endfor %}
            </div>
        {% endif %}
        <form method="post">
            {% csrf_token %}
            
            <!-- Username field -->
            <div class="form-group">
                {{ form.username.label_tag }}
                {{ form.username }}
                {% if form.username.errors %}
                    <div class="error-message">
                        {% for error in form.username.errors %}
                            <p>‚ö†Ô∏è {{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
                {% if form.username.help_text %}
                    <div class="help-text">{{ form.username.help_text|safe }}</div>
                {% endif %}
            </div>
            
            <!-- Password1 field -->
            <div class="form-group">
                {{ form.password1.label_tag }}
                {{ form.password1 }}
                {% if form.password1.errors %}
                    <div class="error-message">
                        {% for error in form.password1.errors %}
                            <p>‚ö†Ô∏è {{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
                {% if form.password1.help_text %}
                    <div class="help-text">{{ form.password1.help_text|safe }}</div>
                {% endif %}
            </div>
            
            <!-- Password2 field -->
            <div class="form-group">
                {{ form.password2.label_tag }}
                {{ form.password2 }}
                {% if form.password2.errors %}
                    <div class="error-message">
                        {% for error in form.password2.errors %}
                            <p>‚ö†Ô∏è {{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
                {% if form.password2.help_text %}
                    <div class="help-text">{{ form.password2.help_text|safe }}</div>
                {% endif %}
            </div>
            
            <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </form>
        <div class="link">
            –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="{% url 'login' %}">–í–æ–π–¥–∏—Ç–µ</a>
        </div>
    </div>
</body>
</html>
```

### 14.3. login.html ‚Äî –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/templates/login.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Ö–æ–¥</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Arial, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
        }
        .form-container { 
            background: white; 
            padding: 40px; 
            border-radius: 10px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.2); 
            width: 100%; 
            max-width: 400px; 
        }
        h1 { 
            text-align: center; 
            margin-bottom: 30px; 
            color: #333; 
            font-size: 24px; 
        }
        form { 
            display: flex; 
            flex-direction: column; 
        }
        label { 
            margin-top: 15px; 
            font-weight: bold; 
            color: #333; 
            font-size: 14px; 
        }
        input { 
            padding: 10px; 
            margin-top: 5px; 
            border: 1px solid #ddd; 
            border-radius: 5px; 
            font-size: 14px; 
        }
        input:focus { 
            outline: none; 
            border-color: #667eea; 
            box-shadow: 0 0 5px rgba(102, 126, 234, 0.3); 
        }
        button { 
            margin-top: 20px; 
            padding: 12px; 
            background: #667eea; 
            color: white; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 16px; 
            font-weight: bold; 
        }
        button:hover { 
            background: #5568d3; 
        }
        .link { 
            text-align: center; 
            margin-top: 20px; 
        }
        .link a { 
            color: #667eea; 
            text-decoration: none; 
        }
        .link a:hover { 
            text-decoration: underline; 
        }
        .error { 
            color: #dc3545; 
            font-size: 12px; 
            margin-top: 5px; 
            background: #f8d7da; 
            padding: 10px; 
            border-radius: 3px; 
            border: 1px solid #f5c6cb; 
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>üîì –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h1>
        {% if error %}
            <div class="error">{{ error }}</div>
        {% endif %}
        <form method="post">
            {% csrf_token %}
            <label for="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
            <input type="text" id="username" name="username" required>
            
            <label for="password">–ü–∞—Ä–æ–ª—å:</label>
            <input type="password" id="password" name="password" required>
            
            <button type="submit">–í–æ–π—Ç–∏</button>
        </form>
        <div class="link">
            –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="{% url 'register' %}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>
        </div>
    </div>
</body>
</html>
```

### 14.4. order_list.html ‚Äî –ú–æ–∏ –∑–∞–∫–∞–∑—ã

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/templates/order_list.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ –∑–∞–∫–∞–∑—ã</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        header { background: white; padding: 20px; border-radius: 5px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h1 { color: #333; margin-bottom: 10px; }
        nav { margin: 10px 0; }
        nav a { margin-right: 15px; text-decoration: none; color: #007bff; font-weight: bold; }
        nav a:hover { text-decoration: underline; }
        nav span { color: #666; margin-right: 15px; }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            background: white; 
            border-radius: 5px; 
            overflow: hidden; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
        }
        th, td { 
            padding: 15px; 
            text-align: left; 
            border-bottom: 1px solid #ddd; 
        }
        th { 
            background: #f0f0f0; 
            font-weight: bold; 
            color: #333; 
        }
        tr:hover { 
            background: #f9f9f9; 
        }
        .empty { 
            text-align: center; 
            padding: 40px; 
            background: white; 
            border-radius: 5px; 
            color: #999; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
        }
        .badge { 
            padding: 5px 10px; 
            border-radius: 3px; 
            font-size: 12px; 
            font-weight: bold; 
        }
        .badge-new { 
            background: #ffc107; 
            color: white; 
        }
        .badge-delivered { 
            background: #28a745; 
            color: white; 
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã</h1>
            <nav>
                <a href="{% url 'product_list' %}">‚Üê –ù–∞–∑–∞–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
                <span>üë§ {{ user.username }}</span>
                <a href="{% url 'logout' %}">üö™ –í—ã—Ö–æ–¥</a>
            </nav>
        </header>

        {% if orders %}
            <table>
                <thead>
                    <tr>
                        <th>‚Ññ –ó–∞–∫–∞–∑–∞</th>
                        <th>–¢–æ–≤–∞—Ä—ã (SKU)</th>
                        <th>–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏</th>
                        <th>–ö–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in orders %}
                    <tr>
                        <td><strong>#{{ order.id }}</strong></td>
                        <td>{{ order.get_skus }}</td>
                        <td>{{ order.createdAt|date:"d.m.Y H:i" }}</td>
                        <td>
                            {% if order.status == 'new' %}
                                <span class="badge badge-new">{{ order.get_status_display }}</span>
                            {% else %}
                                <span class="badge badge-delivered">{{ order.get_status_display }}</span>
                            {% endif %}
                        </td>
                        <td>{{ order.pickupPoint.address }}</td>
                        <td><strong style="color: #28a745;">{{ order.receiveCode }}</strong></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <div class="empty">
                <p>üì≠ –£ –≤–∞—Å –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>
                <p><a href="{% url 'product_list' %}" style="color: #007bff;">‚Üê –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a></p>
            </div>
        {% endif %}
    </div>
</body>
</html>
```

### 14.5. add_product.html ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/templates/add_product.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .container { background: white; padding: 40px; border-radius: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); max-width: 600px; width: 100%; }
        h1 { margin-bottom: 30px; color: #333; text-align: center; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; color: #555; font-weight: bold; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px; font-family: Arial, sans-serif; }
        input:focus, textarea:focus { outline: none; border-color: #667eea; box-shadow: 0 0 5px rgba(102, 126, 234, 0.3); }
        textarea { resize: vertical; min-height: 100px; }
        .btn-group { display: flex; gap: 10px; margin-top: 30px; }
        button { flex: 1; padding: 12px; border: none; border-radius: 5px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; }
        .btn-submit { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4); }
        .btn-cancel { background: #f0f0f0; color: #666; }
        .btn-cancel:hover { background: #e0e0e0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h1>
        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ *</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="sku">–ê—Ä—Ç–∏–∫—É–ª (SKU) *</label>
                <input type="text" id="sku" name="sku" required>
            </div>
            <div class="form-group">
                <label for="price">–¶–µ–Ω–∞ (—Ä—É–±.) *</label>
                <input type="number" id="price" name="price" step="0.01" min="0" required>
            </div>
            <div class="form-group">
                <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="description" name="description"></textarea>
            </div>
            <div class="btn-group">
                <button type="submit" class="btn-submit">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
                <a href="{% url 'product_list' %}" style="flex: 1;">
                    <button type="button" class="btn-cancel" onclick="window.history.back()">–û—Ç–º–µ–Ω–∞</button>
                </a>
            </div>
        </form>
    </div>
</body>
</html>
```

### 14.6. edit_product.html ‚Äî –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/templates/edit_product.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .container { background: white; padding: 40px; border-radius: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); max-width: 600px; width: 100%; }
        h1 { margin-bottom: 30px; color: #333; text-align: center; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; color: #555; font-weight: bold; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px; font-family: Arial, sans-serif; }
        input:focus, textarea:focus { outline: none; border-color: #667eea; box-shadow: 0 0 5px rgba(102, 126, 234, 0.3); }
        textarea { resize: vertical; min-height: 100px; }
        .btn-group { display: flex; gap: 10px; margin-top: 30px; }
        button { flex: 1; padding: 12px; border: none; border-radius: 5px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; }
        .btn-submit { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4); }
        .btn-cancel { background: #f0f0f0; color: #666; }
        .btn-cancel:hover { background: #e0e0e0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä</h1>
        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ *</label>
                <input type="text" id="name" name="name" value="{{ product.name }}" required>
            </div>
            <div class="form-group">
                <label for="sku">–ê—Ä—Ç–∏–∫—É–ª (SKU) *</label>
                <input type="text" id="sku" name="sku" value="{{ product.sku }}" required>
            </div>
            <div class="form-group">
                <label for="price">–¶–µ–Ω–∞ (—Ä—É–±.) *</label>
                <input type="number" id="price" name="price" step="0.01" min="0" value="{{ product.price }}" required>
            </div>
            <div class="form-group">
                <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="description" name="description">{{ product.description }}</textarea>
            </div>
            <div class="btn-group">
                <button type="submit" class="btn-submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                <a href="{% url 'product_list' %}" style="flex: 1;">
                    <button type="button" class="btn-cancel" onclick="window.history.back()">–û—Ç–º–µ–Ω–∞</button>
                </a>
            </div>
        </form>
    </div>
</body>
</html>
```

### 14.7. confirm_delete.html ‚Äî –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/templates/confirm_delete.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .container { background: white; padding: 40px; border-radius: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); max-width: 400px; width: 100%; text-align: center; }
        .icon { font-size: 48px; margin-bottom: 20px; }
        h1 { margin-bottom: 15px; color: #333; }
        .message { color: #666; margin-bottom: 30px; font-size: 16px; }
        .object-name { background: #f0f0f0; padding: 10px; border-radius: 5px; margin: 20px 0; font-weight: bold; color: #333; }
        .btn-group { display: flex; gap: 10px; margin-top: 30px; }
        button, a { flex: 1; padding: 12px; border: none; border-radius: 5px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; text-decoration: none; display: flex; align-items: center; justify-content: center; }
        .btn-delete { background: #dc3545; color: white; }
        .btn-delete:hover { background: #c82333; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4); }
        .btn-cancel { background: #f0f0f0; color: #666; }
        .btn-cancel:hover { background: #e0e0e0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="icon">‚ö†Ô∏è</div>
        <h1>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ</h1>
        <p class="message">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å {{ object_type }}?</p>
        <div class="object-name">{{ object }}</div>
        <p style="color: #999; font-size: 14px;">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
        <form method="post" style="display: inline-block; width: 100%;">
            {% csrf_token %}
            <div class="btn-group">
                <button type="submit" class="btn-delete">–£–¥–∞–ª–∏—Ç—å</button>
                <a href="{% url 'product_list' %}" class="btn-cancel">–û—Ç–º–µ–Ω–∞</a>
            </div>
        </form>
    </div>
</body>
</html>
```

### 14.8. manage_users.html ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/templates/manage_users.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: white; border-radius: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); padding: 30px; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #f0f0f0; }
        h1 { color: #333; }
        .btn { padding: 10px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; border: none; border-radius: 5px; cursor: pointer; transition: all 0.3s ease; font-weight: bold; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4); }
        .btn-back { background: #f0f0f0; color: #666; }
        .btn-back:hover { background: #e0e0e0; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { background: #f8f9fa; padding: 15px; text-align: left; color: #333; font-weight: bold; border-bottom: 2px solid #ddd; }
        td { padding: 12px 15px; border-bottom: 1px solid #ddd; }
        tr:hover { background: #f8f9fa; }
        .role-badge { display: inline-block; padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; text-transform: uppercase; }
        .role-admin { background: #dc3545; color: white; }
        .role-editor { background: #ffc107; color: #333; }
        .role-authorized { background: #28a745; color: white; }
        .role-unauthorized { background: #6c757d; color: white; }
        .actions { display: flex; gap: 10px; }
        .btn-small { padding: 6px 12px; font-size: 12px; text-decoration: none; display: inline-block; }
        .btn-edit { background: #007bff; color: white; }
        .btn-edit:hover { background: #0056b3; }
        .btn-delete { background: #dc3545; color: white; }
        .btn-delete:hover { background: #c82333; }
        .empty-message { text-align: center; padding: 40px; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h1>
            <a href="{% url 'product_list' %}" class="btn btn-back">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è</a>
        </header>

        {% if users %}
            <table>
                <thead>
                    <tr>
                        <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                        <th>Email</th>
                        <th>–†–æ–ª—å</th>
                        <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                        <tr>
                            <td><strong>{{ user.username }}</strong></td>
                            <td>{{ user.email|default:"‚Äî" }}</td>
                            <td>
                                <span class="role-badge role-{{ user.profile.role }}">
                                    {{ user.profile.get_role_display }}
                                </span>
                            </td>
                            <td>{{ user.date_joined|date:"d.m.Y H:i" }}</td>
                            <td>
                                <div class="actions">
                                    <a href="{% url 'edit_user_role' user.id %}" class="btn btn-small btn-edit">‚úèÔ∏è –†–æ–ª—å</a>
                                    {% if user.id != request.user.id %}
                                        <a href="{% url 'delete_user' user.id %}" class="btn btn-small btn-delete">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
                                    {% else %}
                                        <span style="color: #999;">üë§ –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</span>
                                    {% endif %}
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <div class="empty-message">
                <p>–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ</p>
            </div>
        {% endif %}
    </div>
</body>
</html>
```

### 14.9. edit_user_role.html ‚Äî –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/templates/edit_user_role.html`:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .container { background: white; padding: 40px; border-radius: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); max-width: 500px; width: 100%; }
        h1 { margin-bottom: 10px; color: #333; text-align: center; }
        .username { text-align: center; color: #666; margin-bottom: 30px; font-size: 16px; }
        .form-group { margin-bottom: 25px; }
        label { display: block; margin-bottom: 10px; color: #333; font-weight: bold; }
        select { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 16px; cursor: pointer; transition: all 0.3s ease; }
        select:focus { outline: none; border-color: #667eea; box-shadow: 0 0 5px rgba(102, 126, 234, 0.3); }
        .btn-group { display: flex; gap: 10px; margin-top: 30px; }
        button { flex: 1; padding: 12px; border: none; border-radius: 5px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; }
        .btn-submit { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4); }
        .btn-cancel { background: #f0f0f0; color: #666; }
        .btn-cancel:hover { background: #e0e0e0; }
        .role-descriptions { margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px; font-size: 13px; }
        .role-descriptions h4 { color: #333; margin-bottom: 10px; }
        .role-desc { margin-bottom: 10px; color: #666; }
        .role-desc strong { color: #333; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h1>
        <div class="username">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: <strong>{{ user.username }}</strong></div>
        
        <form method="post">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="role">–ù–æ–≤–∞—è —Ä–æ–ª—å</label>
                <select name="role" id="role" required>
                    {% for value, label in profile.ROLE_CHOICES %}
                        <option value="{{ value }}" {% if profile.role == value %}selected{% endif %}>
                            {{ label }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="role-descriptions">
                <h4>üìã –û–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–µ–π:</h4>
                <div class="role-desc">
                    <strong>–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π:</strong> –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
                </div>
                <div class="role-desc">
                    <strong>–ê–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π:</strong> –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π, —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
                </div>
                <div class="role-desc">
                    <strong>–†–µ–¥–∞–∫—Ç–æ—Ä:</strong> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
                </div>
                <div class="role-desc">
                    <strong>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:</strong> –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                </div>
            </div>

            <div class="btn-group">
                <button type="submit" class="btn-submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–æ–ª—å</button>
                <a href="{% url 'manage_users' %}" style="flex: 1;">
                    <button type="button" class="btn-cancel" onclick="window.history.back()">–û—Ç–º–µ–Ω–∞</button>
                </a>
            </div>
        </form>
    </div>
</body>
</html>
```

---

## 15. –°–æ–∑–¥–∞–Ω–∏–µ management-–∫–æ–º–∞–Ω–¥

Management-–∫–æ–º–∞–Ω–¥—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã —á–µ—Ä–µ–∑ `python manage.py <–∫–æ–º–∞–Ω–¥–∞>`.

### 15.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ø–∞–ø–∫–∏ –∏ `__init__.py`:

```
bodies/
‚îî‚îÄ‚îÄ management/
    ‚îú‚îÄ‚îÄ __init__.py          # –ü—É—Å—Ç–æ–π —Ñ–∞–π–ª
    ‚îî‚îÄ‚îÄ commands/
        ‚îú‚îÄ‚îÄ __init__.py      # –ü—É—Å—Ç–æ–π —Ñ–∞–π–ª
        ‚îú‚îÄ‚îÄ create_test_users.py
        ‚îî‚îÄ‚îÄ import_products.py
```

### 15.2. create_test_users.py ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/management/commands/create_test_users.py`:

```python
#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: python manage.py create_test_users
"""

from django.core.management.base import BaseCommand
from django.contrib.auth.models import User
from bodies.models import Profile


class Command(BaseCommand):
    help = '–°–æ–∑–¥–∞—ë—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏'

    def handle(self, *args, **options):
        """–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"""
        
        test_users = [
            {'username': 'admin', 'password': 'admin', 'role': 'admin'},
            {'username': 'editor', 'password': 'editor', 'role': 'editor'},
            {'username': 'user', 'password': 'user', 'role': 'authorized'},
            {'username': 'guest', 'password': 'guest', 'role': 'unauthorized'},
        ]
        
        self.stdout.write("=" * 60)
        self.stdout.write("üìù –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
        self.stdout.write("=" * 60)
        
        for user_data in test_users:
            username = user_data['username']
            password = user_data['password']
            role = user_data['role']
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            if User.objects.filter(username=username).exists():
                user = User.objects.get(username=username)
                self.stdout.write(
                    self.style.WARNING(f"‚ö†Ô∏è  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å '{username}' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")
                )
                
                # –ò—Å–ø–æ–ª—å–∑—É–µ–º get_or_create –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è
                profile, created = Profile.objects.get_or_create(
                    user=user,
                    defaults={'role': role}
                )
                
                # –û–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–ª—å –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è
                if profile.role != role:
                    profile.role = role
                    profile.save()
                    self.stdout.write(
                        self.style.SUCCESS(f"‚úÖ –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è '{username}' –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ '{role}'")
                    )
                elif created:
                    self.stdout.write(
                        self.style.SUCCESS(f"‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –¥–ª—è '{username}' —Å–æ–∑–¥–∞–Ω —Å —Ä–æ–ª—å—é '{role}'")
                    )
            else:
                # –°–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                user = User.objects.create_user(
                    username=username,
                    password=password,
                    first_name=username.capitalize()
                )
                
                # –°–æ–∑–¥–∞—ë–º –ø—Ä–æ—Ñ–∏–ª—å —Å —Ä–æ–ª—å—é (–∏—Å–ø–æ–ª—å–∑—É–µ–º get_or_create –Ω–∞ —Å–ª—É—á–∞–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
                profile, created = Profile.objects.get_or_create(
                    user=user,
                    defaults={'role': role}
                )
                
                self.stdout.write(
                    self.style.SUCCESS(
                        f"‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å '{username}' —Å–æ–∑–¥–∞–Ω\n"
                        f"   –ü–∞—Ä–æ–ª—å: {password}\n"
                        f"   –†–æ–ª—å: {role}"
                    )
                )
        
        self.stdout.write("=" * 60)
        self.stdout.write(self.style.SUCCESS("‚úÖ –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã!"))
        self.stdout.write("=" * 60)
        self.stdout.write("\nüìã –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:\n")
        
        for user_data in test_users:
            self.stdout.write(
                f"  üë§ {user_data['username']:12} | üîê {user_data['password']:12} | üëë {user_data['role']}"
            )
        
        self.stdout.write("\n")
```

### 15.3. import_products.py ‚Äî –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ Excel

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bodies/management/commands/import_products.py`:

```python
import openpyxl
from django.core.management.base import BaseCommand
from bodies.models import Product


class Command(BaseCommand):
    """–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ Excel —Ñ–∞–π–ª–∞"""
    
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä—ã –∏–∑ Excel-—Ñ–∞–π–ª–∞'

    def add_arguments(self, parser):
        parser.add_argument(
            'file_path',
            type=str,
            help='–ü—É—Ç—å –∫ Excel-—Ñ–∞–π–ª—É —Å —Ç–æ–≤–∞—Ä–∞–º–∏'
        )

    def handle(self, *args, **options):
        file_path = options['file_path']
        
        try:
            wb = openpyxl.load_workbook(file_path)
            ws = wb.active
            
            # –ü–æ–ª—É—á–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏–∑ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏
            headers = [cell.value for cell in ws[1]]
            count = 0
            
            # –ü—Ä–æ–π—Ç–∏ –ø–æ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ, –Ω–∞—á–∏–Ω–∞—è —Å–æ –≤—Ç–æ—Ä–æ–π
            for row in ws.iter_rows(min_row=2, values_only=True):
                data = dict(zip(headers, row))
                
                if not data.get('–ê—Ä—Ç–∏–∫—É–ª'):
                    continue
                
                # update_or_create - —Å–æ–∑–¥–∞—Å—Ç –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–±–Ω–æ–≤–∏—Ç –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                Product.objects.update_or_create(
                    sku=data['–ê—Ä—Ç–∏–∫—É–ª'],
                    defaults={
                        'name':        data.get('–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞', ''),
                        'price':       str(data.get('–¶–µ–Ω–∞', 0)).replace(',', '.'),
                        'description': data.get('–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞', '') or '',
                    }
                )
                count += 1
            
            self.stdout.write(
                self.style.SUCCESS(f'‚úÖ –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ {count} —Ç–æ–≤–∞—Ä–æ–≤')
            )
            
        except FileNotFoundError:
            self.stdout.write(
                self.style.ERROR(f'‚ùå –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: {file_path}')
            )
        except Exception as e:
            self.stdout.write(
                self.style.ERROR(f'‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ: {str(e)}')
            )
```

---

## 16. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL

–ü–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ psql (—Ç–µ—Ä–º–∏–Ω–∞–ª)

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
psql -U postgres

# –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
CREATE DATABASE shop;

# –í—ã–π—Ç–∏
\q
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ DBeaver

1. –û—Ç–∫—Ä–æ–π—Ç–µ DBeaver
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL (localhost, 5432, postgres/postgres)
3. –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí Create Database ‚Üí –ò–º—è: `shop`

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ pgAdmin

1. –û—Ç–∫—Ä–æ–π—Ç–µ pgAdmin
2. Servers ‚Üí PostgreSQL ‚Üí Databases ‚Üí –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí Create ‚Üí Database
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è: `shop`

---

## 17. –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
cd example
python manage.py makemigrations
```

–í—ã–≤–æ–¥:
```
Migrations for 'bodies':
  bodies/migrations/0001_initial.py
    - Create model Product
    - Create model PickupPoint
    - Create model Profile
    - Create model Order
```

### –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
python manage.py migrate
```

–í—ã–≤–æ–¥:
```
Operations to perform:
  Apply all migrations: admin, auth, bodies, contenttypes, sessions
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying auth.0001_initial... OK
  ...
  Applying bodies.0001_initial... OK
  Applying sessions.0001_initial... OK
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

```bash
python manage.py createsuperuser
# Username: admin
# Email: (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º)
# Password: admin (–ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–≤–∞–∂–¥—ã)
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```bash
python manage.py create_test_users
```

### –®–∞–≥ 5: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

```bash
python manage.py runserver
```

–í—ã–≤–æ–¥:
```
Starting development server at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK.
```

---

## 18. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

| URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| `http://127.0.0.1:8000/` | –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ |
| `http://127.0.0.1:8000/register/` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| `http://127.0.0.1:8000/login/` | –í—Ö–æ–¥ |
| `http://127.0.0.1:8000/admin/` | Django –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å |
| `http://127.0.0.1:8000/orders/` | –ú–æ–∏ –∑–∞–∫–∞–∑—ã |
| `http://127.0.0.1:8000/users/` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (admin) |

### –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã

| –õ–æ–≥–∏–Ω | –ü–∞—Ä–æ–ª—å | –†–æ–ª—å |
|-------|--------|------|
| `admin` | `admin` | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø) |
| `editor` | `editor` | –†–µ–¥–∞–∫—Ç–æ—Ä (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤) |
| `user` | `user` | –ê–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–∑–∞–∫–∞–∑—ã –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è) |
| `guest` | `guest` | –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä) |

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫: `python manage.py runserver`
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã: `python manage.py check` ‚Üí System check identified no issues
- [ ] –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è: `http://127.0.0.1:8000/`
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í—Ö–æ–¥ –∏ –≤—ã—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞: `http://127.0.0.1:8000/admin/`
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Ç–æ–≤–∞—Ä—ã
- [ ] –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∏—Ö —Ä–æ–ª—è–º–∏
- [ ] –ó–∞–∫–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏

---

## üìÅ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –±—É–¥–µ—Ç:

```
example/
‚îú‚îÄ‚îÄ manage.py                          # Django CLI
‚îú‚îÄ‚îÄ requirements.txt                   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ config/                            # ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ settings.py                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                        # –ì–ª–∞–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ wsgi.py                        # WSGI
‚îÇ   ‚îî‚îÄ‚îÄ asgi.py                        # ASGI
‚îÇ
‚îú‚îÄ‚îÄ bodies/                            # üéØ –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py                      # –ú–æ–¥–µ–ª–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ views.py                       # –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ forms.py                       # –§–æ—Ä–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                        # –ú–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ admin.py                       # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ signals.py                     # –°–∏–≥–Ω–∞–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ apps.py                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ tests.py                       # –¢–µ—Å—Ç—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ templates/                     # üé® HTML-—à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products.html              # –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register.html              # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.html                 # –í—Ö–æ–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order_list.html            # –ú–æ–∏ –∑–∞–∫–∞–∑—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ add_product.html           # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edit_product.html          # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ confirm_delete.html        # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manage_users.html          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ edit_user_role.html        # –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ management/                    # üîß Management-–∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ commands/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ create_test_users.py   # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ import_products.py     # –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ Excel
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ migrations/                    # üóÑÔ∏è –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ 0001_initial.py            # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞
‚îÇ
‚îî‚îÄ‚îÄ venv/                              # üîí –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è)
```

---

## üîÑ –ü–æ—Ä—è–¥–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ (–ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ)

| –®–∞–≥ | –î–µ–π—Å—Ç–≤–∏–µ | –§–∞–π–ª—ã |
|-----|----------|-------|
| 1 | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ PostgreSQL | ‚Äî |
| 2 | –°–æ–∑–¥–∞—Ç—å venv, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã | `requirements.txt` |
| 3 | `django-admin startproject config .` | `manage.py`, `config/*` |
| 4 | `python manage.py startapp bodies` | `bodies/*` |
| 5 | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å settings.py | `config/settings.py` |
| 6 | –ù–∞–ø–∏—Å–∞—Ç—å –º–æ–¥–µ–ª–∏ | `bodies/models.py` |
| 7 | –ù–∞–ø–∏—Å–∞—Ç—å —Ñ–æ—Ä–º—ã | `bodies/forms.py` |
| 8 | –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è | `bodies/views.py` |
| 9 | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã | `config/urls.py`, `bodies/urls.py` |
| 10 | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–¥–º–∏–Ω–∫—É | `bodies/admin.py` |
| 11 | –ù–∞–ø–∏—Å–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã | `bodies/signals.py` |
| 12 | –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Å–∏–≥–Ω–∞–ª—ã | `bodies/apps.py` |
| 13 | –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω—ã (9 —Ñ–∞–π–ª–æ–≤) | `bodies/templates/*.html` |
| 14 | –°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã | `bodies/management/commands/*.py` |
| 15 | –°–æ–∑–¥–∞—Ç—å –ë–î PostgreSQL | `CREATE DATABASE shop;` |
| 16 | –ú–∏–≥—Ä–∞—Ü–∏–∏ | `python manage.py makemigrations && migrate` |
| 17 | –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | `python manage.py create_test_users` |
| 18 | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä | `python manage.py runserver` |

---

**–ì–æ—Ç–æ–≤–æ! üéâ –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–±—Ä–∞–Ω —Å –Ω—É–ª—è –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!**
