# üìù –ö–∞–∫–∏–µ Python —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—Ç—å –∏ –∫–∞–∫–∏–µ –æ–±–Ω–æ–≤–∏—Ç—å

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö Python —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –Ω–∞ –¥–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```
back/
‚îú‚îÄ‚îÄ back/                          # –ü–∞–ø–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (—Å–æ–∑–¥–∞–µ—Ç—Å—è Django)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py               # ‚ùå –ù–µ —Ç—Ä–æ–≥–∞—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ settings.py               # ‚úèÔ∏è –û–ë–ù–û–í–ò–¢–¨
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                   # ‚úèÔ∏è –û–ë–ù–û–í–ò–¢–¨
‚îÇ   ‚îú‚îÄ‚îÄ asgi.py                   # ‚ùå –ù–µ —Ç—Ä–æ–≥–∞—Ç—å
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py                   # ‚ùå –ù–µ —Ç—Ä–æ–≥–∞—Ç—å
‚îÇ
‚îú‚îÄ‚îÄ bodies/                        # –ü–∞–ø–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞–µ—Ç—Å—è Django)
‚îÇ   ‚îú‚îÄ‚îÄ migrations/               # –ü–∞–ø–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π (—Å–æ–∑–¥–∞–µ—Ç—Å—è Django)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py           # ‚ùå –ù–µ —Ç—Ä–æ–≥–∞—Ç—å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 0001_initial.py       # ü§ñ –°–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (makemigrations)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ management/               # üìÅ –°–û–ó–î–ê–¢–¨ –ü–ê–ü–ö–£
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py           # üìÑ –°–û–ó–î–ê–¢–¨ –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ commands/             # üìÅ –°–û–ó–î–ê–¢–¨ –ü–ê–ü–ö–£
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py       # üìÑ –°–û–ó–î–ê–¢–¨ –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ import_products.py # üìÑ –°–û–ó–î–ê–¢–¨ –∏ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ templates/                # üìÅ –°–û–ó–î–ê–¢–¨ –ü–ê–ü–ö–£
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products.html         # üìÑ –°–û–ó–î–ê–¢–¨ HTML
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.html            # üìÑ –°–û–ó–î–ê–¢–¨ HTML
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register.html         # üìÑ –°–û–ó–î–ê–¢–¨ HTML
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ order_list.html       # üìÑ –°–û–ó–î–ê–¢–¨ HTML
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py               # ‚ùå –ù–µ —Ç—Ä–æ–≥–∞—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ admin.py                  # ‚úèÔ∏è –û–ë–ù–û–í–ò–¢–¨
‚îÇ   ‚îú‚îÄ‚îÄ apps.py                   # ‚ùå –ù–µ —Ç—Ä–æ–≥–∞—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ models.py                 # ‚úèÔ∏è –û–ë–ù–û–í–ò–¢–¨
‚îÇ   ‚îú‚îÄ‚îÄ tests.py                  # ‚ùå –ù–µ —Ç—Ä–æ–≥–∞—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ views.py                  # ‚úèÔ∏è –û–ë–ù–û–í–ò–¢–¨
‚îÇ   ‚îî‚îÄ‚îÄ urls.py                   # üìÑ –°–û–ó–î–ê–¢–¨
‚îÇ
‚îú‚îÄ‚îÄ manage.py                      # ‚ùå –ù–µ —Ç—Ä–æ–≥–∞—Ç—å
‚îú‚îÄ‚îÄ db.sqlite3                     # üóÑÔ∏è –ë–î (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ PostgreSQL)
‚îú‚îÄ‚îÄ venv/                          # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ README.md                      # üìÑ –°–û–ó–î–ê–¢–¨ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
```

---

## üü¢ –°–û–ó–î–ê–¢–¨ –ù–û–í–´–ï –§–ê–ô–õ–´ (–Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ Django)

### 1. **bodies/urls.py** ‚ûï –°–û–ó–î–ê–¢–¨

```python
from django.urls import path
from django.contrib.auth import views as auth_views
from . import views

urlpatterns = [
    path('',                          views.product_list,  name='product_list'),
    path('register/',                 views.register_view, name='register'),
    path('login/',                    views.login_view,    name='login'),
    path('logout/',                   views.logout_view,   name='logout'),
    path('orders/',                   views.order_list,    name='order_list'),
    path('buy/<int:product_id>/<int:pickup_point_id>/',
         views.create_order, name='create_order'),
]
```

**–ì–¥–µ:** `d:\Test_Django_1\back\bodies\urls.py`  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ù–æ–≤—ã–π —Ñ–∞–π–ª  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~10

---

### 2. **bodies/management/__init__.py** ‚ûï –°–û–ó–î–ê–¢–¨

```python
# –ü—É—Å—Ç–æ–π —Ñ–∞–π–ª - –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã Python —Ä–∞—Å–ø–æ–∑–Ω–∞–ª –ø–∞–ø–∫—É –∫–∞–∫ –ø–∞–∫–µ—Ç
```

**–ì–¥–µ:** `d:\Test_Django_1\back\bodies\management\__init__.py`  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ù–æ–≤—ã–π –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** 0 (–ø—É—Å—Ç–æ)

---

### 3. **bodies/management/commands/__init__.py** ‚ûï –°–û–ó–î–ê–¢–¨

```python
# –ü—É—Å—Ç–æ–π —Ñ–∞–π–ª - –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã Python —Ä–∞—Å–ø–æ–∑–Ω–∞–ª –ø–∞–ø–∫—É –∫–∞–∫ –ø–∞–∫–µ—Ç
```

**–ì–¥–µ:** `d:\Test_Django_1\back\bodies\management\commands\__init__.py`  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ù–æ–≤—ã–π –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** 0 (–ø—É—Å—Ç–æ)

---

### 4. **bodies/management/commands/import_products.py** ‚ûï –°–û–ó–î–ê–¢–¨

```python
import openpyxl
from django.core.management.base import BaseCommand
from bodies.models import Product


class Command(BaseCommand):
    """–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ Excel —Ñ–∞–π–ª–∞"""
    
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä—ã –∏–∑ Excel-—Ñ–∞–π–ª–∞'

    def add_arguments(self, parser):
        parser.add_argument(
            'file_path',
            type=str,
            help='–ü—É—Ç—å –∫ Excel-—Ñ–∞–π–ª—É —Å —Ç–æ–≤–∞—Ä–∞–º–∏'
        )

    def handle(self, *args, **options):
        file_path = options['file_path']
        
        try:
            wb = openpyxl.load_workbook(file_path)
            ws = wb.active
            
            # –ü–æ–ª—É—á–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏–∑ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏
            headers = [cell.value for cell in ws[1]]
            count = 0
            
            # –ü—Ä–æ–π—Ç–∏ –ø–æ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ, –Ω–∞—á–∏–Ω–∞—è —Å–æ –≤—Ç–æ—Ä–æ–π
            for row in ws.iter_rows(min_row=2, values_only=True):
                data = dict(zip(headers, row))
                
                if not data.get('–ê—Ä—Ç–∏–∫—É–ª'):
                    continue
                
                # update_or_create - —Å–æ–∑–¥–∞—Å—Ç –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–±–Ω–æ–≤–∏—Ç –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                Product.objects.update_or_create(
                    sku=data['–ê—Ä—Ç–∏–∫—É–ª'],
                    defaults={
                        'name':        data.get('–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞', ''),
                        'price':       str(data.get('–¶–µ–Ω–∞', 0)).replace(',', '.'),
                        'description': data.get('–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞', '') or '',
                    }
                )
                count += 1
            
            self.stdout.write(
                self.style.SUCCESS(f'‚úÖ –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ {count} —Ç–æ–≤–∞—Ä–æ–≤')
            )
            
        except FileNotFoundError:
            self.stdout.write(
                self.style.ERROR(f'‚ùå –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: {file_path}')
            )
        except Exception as e:
            self.stdout.write(
                self.style.ERROR(f'‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ: {str(e)}')
            )
```

**–ì–¥–µ:** `d:\Test_Django_1\back\bodies\management\commands\import_products.py`  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ù–æ–≤—ã–π —Ñ–∞–π–ª  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~50  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** `python manage.py import_products "path/to/file.xlsx"`

---

### 5. **bodies/templates/products.html** ‚ûï –°–û–ó–î–ê–¢–¨

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        header { background: white; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
        nav { margin: 10px 0; }
        nav a { margin-right: 15px; text-decoration: none; color: #007bff; }
        nav a:hover { text-decoration: underline; }
        .products { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        .product { background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .product h3 { margin-bottom: 10px; color: #333; }
        .product p { color: #666; font-size: 14px; margin: 5px 0; }
        .price { font-size: 18px; font-weight: bold; color: #28a745; margin: 10px 0; }
        .empty { text-align: center; padding: 40px; color: #999; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üõçÔ∏è –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω</h1>
            <nav>
                {% if user.is_authenticated %}
                    <span>üë§ {{ user.username }}</span> |
                    <a href="{% url 'order_list' %}">üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã</a> |
                    <a href="{% url 'logout' %}">üö™ –í—ã—Ö–æ–¥</a>
                {% else %}
                    <a href="{% url 'login' %}">üîì –í—Ö–æ–¥</a> |
                    <a href="{% url 'register' %}">‚úçÔ∏è –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% endif %}
            </nav>
        </header>

        {% if products %}
            <div class="products">
                {% for product in products %}
                    <div class="product">
                        <h3>{{ product.name }}</h3>
                        <p><strong>–ê—Ä—Ç–∏–∫—É–ª:</strong> {{ product.sku }}</p>
                        <p>{{ product.description }}</p>
                        <div class="price">{{ product.price }} ‚ÇΩ</div>
                        {% if user.is_authenticated %}
                            <a href="{% url 'create_order' product.id 1 %}" style="display: inline-block; background: #007bff; color: white; padding: 8px 12px; border-radius: 3px; text-decoration: none; margin-top: 10px;">–ó–∞–∫–∞–∑–∞—Ç—å</a>
                        {% else %}
                            <p style="color: #999; font-size: 12px; margin-top: 10px;">–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –∑–∞–∫–∞–∑–∞—Ç—å</p>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty">
                <p>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                <p style="font-size: 12px; margin-top: 10px;">–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: /admin/</p>
            </div>
        {% endif %}
    </div>
</body>
</html>
```

**–ì–¥–µ:** `d:\Test_Django_1\back\bodies\templates\products.html`  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ù–æ–≤—ã–π —Ñ–∞–π–ª  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~70 (HTML)

---

### 6. **bodies/templates/login.html** ‚ûï –°–û–ó–î–ê–¢–¨

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Ö–æ–¥</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial; background: #f5f5f5; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .form-container { background: white; padding: 30px; border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
        h1 { text-align: center; margin-bottom: 20px; color: #333; }
        form { display: flex; flex-direction: column; }
        label { margin-top: 15px; font-weight: bold; color: #333; }
        input, textarea { padding: 10px; margin-top: 5px; border: 1px solid #ddd; border-radius: 3px; font-size: 14px; }
        input:focus { outline: none; border-color: #007bff; }
        button { margin-top: 20px; padding: 10px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 16px; }
        button:hover { background: #0056b3; }
        .link { text-align: center; margin-top: 15px; }
        .link a { color: #007bff; text-decoration: none; }
        .error { color: red; font-size: 12px; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>üîì –í—Ö–æ–¥</h1>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">–í–æ–π—Ç–∏</button>
        </form>
        <div class="link">
            –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="{% url 'register' %}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>
        </div>
    </div>
</body>
</html>
```

**–ì–¥–µ:** `d:\Test_Django_1\back\bodies\templates\login.html`  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ù–æ–≤—ã–π —Ñ–∞–π–ª  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~50 (HTML)

---

### 7. **bodies/templates/register.html** ‚ûï –°–û–ó–î–ê–¢–¨

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial; background: #f5f5f5; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .form-container { background: white; padding: 30px; border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
        h1 { text-align: center; margin-bottom: 20px; color: #333; }
        form { display: flex; flex-direction: column; }
        label { margin-top: 15px; font-weight: bold; color: #333; }
        input, textarea { padding: 10px; margin-top: 5px; border: 1px solid #ddd; border-radius: 3px; font-size: 14px; }
        input:focus { outline: none; border-color: #007bff; }
        button { margin-top: 20px; padding: 10px; background: #28a745; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 16px; }
        button:hover { background: #218838; }
        .link { text-align: center; margin-top: 15px; }
        .link a { color: #007bff; text-decoration: none; }
        .help-text { font-size: 12px; color: #999; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>‚úçÔ∏è –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </form>
        <div class="link">
            –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="{% url 'login' %}">–í–æ–π–¥–∏—Ç–µ</a>
        </div>
    </div>
</body>
</html>
```

**–ì–¥–µ:** `d:\Test_Django_1\back\bodies\templates\register.html`  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ù–æ–≤—ã–π —Ñ–∞–π–ª  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~50 (HTML)

---

### 8. **bodies/templates/order_list.html** ‚ûï –°–û–ó–î–ê–¢–¨

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ –∑–∞–∫–∞–∑—ã</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        header { background: white; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
        nav { margin: 10px 0; }
        nav a { margin-right: 15px; text-decoration: none; color: #007bff; }
        nav a:hover { text-decoration: underline; }
        table { width: 100%; border-collapse: collapse; background: white; border-radius: 5px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #f0f0f0; font-weight: bold; }
        tr:hover { background: #f9f9f9; }
        .empty { text-align: center; padding: 40px; color: #999; }
        .badge { padding: 5px 10px; border-radius: 3px; font-size: 12px; }
        .badge-new { background: #ffc107; color: white; }
        .badge-delivered { background: #28a745; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã</h1>
            <nav>
                <a href="{% url 'product_list' %}">‚Üê –ù–∞–∑–∞–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥</a> |
                <span>üë§ {{ user.username }}</span> |
                <a href="{% url 'logout' %}">üö™ –í—ã—Ö–æ–¥</a>
            </nav>
        </header>

        {% if orders %}
            <table>
                <thead>
                    <tr>
                        <th>‚Ññ –ó–∞–∫–∞–∑–∞</th>
                        <th>–¢–æ–≤–∞—Ä—ã</th>
                        <th>–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏</th>
                        <th>–ö–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in orders %}
                    <tr>
                        <td>#{{ order.id }}</td>
                        <td>{{ order.get_skus }}</td>
                        <td>{{ order.createdAt|date:"d.m.Y H:i" }}</td>
                        <td>
                            {% if order.status == 'new' %}
                                <span class="badge badge-new">{{ order.get_status_display }}</span>
                            {% else %}
                                <span class="badge badge-delivered">{{ order.get_status_display }}</span>
                            {% endif %}
                        </td>
                        <td>{{ order.pickupPoint.address }}</td>
                        <td><strong>{{ order.receiveCode }}</strong></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <div class="empty">
                <p>–£ –≤–∞—Å –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>
                <p><a href="{% url 'product_list' %}">‚Üê –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a></p>
            </div>
        {% endif %}
    </div>
</body>
</html>
```

**–ì–¥–µ:** `d:\Test_Django_1\back\bodies\templates\order_list.html`  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ù–æ–≤—ã–π —Ñ–∞–π–ª  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~80 (HTML)

---

## üîµ –û–ë–ù–û–í–ò–¢–¨ –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï –§–ê–ô–õ–´ (–∏–∑–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ)

### 1. **back/settings.py** ‚úèÔ∏è –û–ë–ù–û–í–ò–¢–¨

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:**

#### –ü—É–Ω–∫—Ç 1: INSTALLED_APPS (—Å—Ç—Ä–æ–∫–∞ ~33)

–î–æ–±–∞–≤–∏—Ç—å `'bodies'` –≤ –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞:

```python
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    
    'bodies',  # ‚Üê –î–û–ë–ê–í–ò–¢–¨
]
```

#### –ü—É–Ω–∫—Ç 2: DATABASES (—Å—Ç—Ä–æ–∫–∞ ~78)

–ó–∞–º–µ–Ω–∏—Ç—å –≤–µ—Å—å –±–ª–æ–∫ DATABASES:

```python
# ‚ùå –ë–´–õ–û
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}

# ‚úÖ –°–¢–ê–õ–û
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'shop',
        'USER': 'postgres',
        'PASSWORD': 'postgres',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}
```

**–ì–¥–µ:** `d:\Test_Django_1\back\back\settings.py`  
**–°—Ç—Ä–æ–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** 2 –±–ª–æ–∫–∞ (~6 —Å—Ç—Ä–æ–∫ –∏—Ç–æ–≥–æ)  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ

---

### 2. **back/urls.py** ‚úèÔ∏è –û–ë–ù–û–í–ò–¢–¨

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:**

–ó–∞–º–µ–Ω–∏—Ç—å –≤–µ—Å—å —Ñ–∞–π–ª:

```python
# ‚ùå –ë–´–õ–û
from django.contrib import admin
from django.urls import path

urlpatterns = [
    path('admin/', admin.site.urls),
]

# ‚úÖ –°–¢–ê–õ–û
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('',       include('bodies.urls')),  # ‚Üê –î–û–ë–ê–í–ò–¢–¨
]
```

**–ì–¥–µ:** `d:\Test_Django_1\back\back\urls.py`  
**–°—Ç—Ä–æ–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** 1 –∏–º–ø–æ—Ä—Ç + 1 –º–∞—Ä—à—Ä—É—Ç (~3 —Å—Ç—Ä–æ–∫–∏)  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ

---

### 3. **bodies/models.py** ‚úèÔ∏è –û–ë–ù–û–í–ò–¢–¨

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:**

–ó–∞–º–µ–Ω–∏—Ç—å –≤–µ—Å—å —Ñ–∞–π–ª –Ω–∞ –ø–æ–ª–Ω—ã–π –∫–æ–¥ –≤—Å–µ—Ö 4 –º–æ–¥–µ–ª–µ–π:

```python
import random
import string
from django.db import models
from django.contrib.auth.models import User


def generate_receive_code():
    return ''.join(random.choices(string.ascii_uppercase + string.digits, k=6))


class Product(models.Model):
    name        = models.CharField(max_length=255, verbose_name="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞")
    price       = models.DecimalField(max_digits=10, decimal_places=2, verbose_name="–¶–µ–Ω–∞ (—Ä—É–±.)")
    description = models.TextField(blank=True, verbose_name="–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞")
    sku         = models.CharField(max_length=50, unique=True, verbose_name="–ê—Ä—Ç–∏–∫—É–ª")

    class Meta:
        verbose_name = "–¢–æ–≤–∞—Ä"
        verbose_name_plural = "–¢–æ–≤–∞—Ä—ã"

    def __str__(self):
        return f"{self.name} ({self.sku})"


class PickupPoint(models.Model):
    address = models.CharField(max_length=500, verbose_name="–ê–¥—Ä–µ—Å –ø—É–Ω–∫—Ç–∞ –≤—ã–¥–∞—á–∏")

    class Meta:
        verbose_name = "–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏"
        verbose_name_plural = "–ü—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏"

    def __str__(self):
        return self.address


class Order(models.Model):
    STATUS_CHOICES = [('new', '–ù–æ–≤—ã–π'), ('delivered', '–ó–∞–≤–µ—Ä—à–µ–Ω')]
    
    user         = models.ForeignKey(User, on_delete=models.CASCADE, related_name="orders")
    products     = models.ManyToManyField(Product)
    createdAt    = models.DateTimeField(auto_now_add=True)
    deliveryDate = models.DateTimeField(null=True, blank=True)
    receiveCode  = models.CharField(max_length=10, default=generate_receive_code)
    pickupPoint  = models.ForeignKey(PickupPoint, on_delete=models.SET_NULL, null=True)
    status       = models.CharField(max_length=20, choices=STATUS_CHOICES, default='new')

    def __str__(self):
        user_name = self.user.get_full_name() or self.user.username
        return f"–ó–∞–∫–∞–∑ #{self.id} - {user_name}"
    
    def get_skus(self):
        return ', '.join([p.sku for p in self.products.all()])


class Profile(models.Model):
    ROLE_CHOICES = [('admin', '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä'), ('manager', '–ú–µ–Ω–µ–¥–∂–µ—Ä'), ('customer', '–ü–æ–∫—É–ø–∞—Ç–µ–ª—å')]
    
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    role = models.CharField(max_length=20, choices=ROLE_CHOICES, default='customer')

    def __str__(self):
        return f"{self.user.username} ({self.get_role_display()})"
```

**–ì–¥–µ:** `d:\Test_Django_1\back\bodies\models.py`  
**–°—Ç—Ä–æ–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** –í–µ—Å—å —Ñ–∞–π–ª (~80 —Å—Ç—Ä–æ–∫)  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê –°—Ä–µ–¥–Ω—è—è

---

### 4. **bodies/views.py** ‚úèÔ∏è –û–ë–ù–û–í–ò–¢–¨

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:**

–ó–∞–º–µ–Ω–∏—Ç—å –≤–µ—Å—å —Ñ–∞–π–ª:

```python
from django.shortcuts import render, redirect, get_object_or_404
from django.contrib.auth.forms import UserCreationForm
from django.contrib.auth import login, logout
from django.contrib.auth.decorators import login_required
from .models import Product, PickupPoint, Order


def product_list(request):
    products = Product.objects.all()
    return render(request, 'products.html', {'products': products})


def register_view(request):
    if request.method == 'POST':
        form = UserCreationForm(request.POST)
        if form.is_valid():
            user = form.save()
            login(request, user)
            return redirect('product_list')
    else:
        form = UserCreationForm()
    return render(request, 'register.html', {'form': form})


def login_view(request):
    if request.method == 'POST':
        from django.contrib.auth import authenticate
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(request, username=username, password=password)
        if user is not None:
            login(request, user)
            return redirect('product_list')
    return render(request, 'login.html')


def logout_view(request):
    logout(request)
    return redirect('product_list')


@login_required(login_url='login')
def order_list(request):
    orders = Order.objects.filter(user=request.user)
    return render(request, 'order_list.html', {'orders': orders})


@login_required(login_url='login')
def create_order(request, product_id, pickup_point_id):
    product      = get_object_or_404(Product, id=product_id)
    pickup_point = get_object_or_404(PickupPoint, id=pickup_point_id)
    order = Order.objects.create(user=request.user, pickupPoint=pickup_point)
    order.products.add(product)
    return redirect('order_list')
```

**–ì–¥–µ:** `d:\Test_Django_1\back\bodies\views.py`  
**–°—Ç—Ä–æ–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** –í–µ—Å—å —Ñ–∞–π–ª (~60 —Å—Ç—Ä–æ–∫)  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê –°—Ä–µ–¥–Ω—è—è

---

### 5. **bodies/admin.py** ‚úèÔ∏è –û–ë–ù–û–í–ò–¢–¨

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:**

–ó–∞–º–µ–Ω–∏—Ç—å –≤–µ—Å—å —Ñ–∞–π–ª:

```python
from django.contrib import admin
from .models import Product, PickupPoint, Order, Profile


@admin.register(Product)
class ProductAdmin(admin.ModelAdmin):
    list_display = ('name', 'sku', 'price')
    search_fields = ('name', 'sku')
    list_filter = ('price',)


@admin.register(PickupPoint)
class PickupPointAdmin(admin.ModelAdmin):
    list_display = ('address',)


@admin.register(Order)
class OrderAdmin(admin.ModelAdmin):
    list_display = ('id', 'user', 'status', 'createdAt', 'receiveCode')
    list_filter = ('status', 'createdAt')
    search_fields = ('user__username', 'receiveCode')
    readonly_fields = ('createdAt', 'receiveCode')


@admin.register(Profile)
class ProfileAdmin(admin.ModelAdmin):
    list_display = ('user', 'role')
    list_filter = ('role',)
```

**–ì–¥–µ:** `d:\Test_Django_1\back\bodies\admin.py`  
**–°—Ç—Ä–æ–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** –í–µ—Å—å —Ñ–∞–π–ª (~30 —Å—Ç—Ä–æ–∫)  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê –°—Ä–µ–¥–Ω—è—è

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞

| # | –§–∞–π–ª | –î–µ–π—Å—Ç–≤–∏–µ | –°—Ç—Ä–æ–∫ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|---|------|----------|-------|-----------|
| 1 | `back/settings.py` | ‚úèÔ∏è –û–±–Ω–æ–≤–∏—Ç—å | 2 –±–ª–æ–∫–∞ (~6 —Å—Ç—Ä–æ–∫) | ‚≠ê |
| 2 | `back/urls.py` | ‚úèÔ∏è –û–±–Ω–æ–≤–∏—Ç—å | 1 –∏–º–ø–æ—Ä—Ç + 1 –º–∞—Ä—à—Ä—É—Ç | ‚≠ê |
| 3 | `bodies/models.py` | ‚úèÔ∏è –û–±–Ω–æ–≤–∏—Ç—å | –í–µ—Å—å —Ñ–∞–π–ª (~80 —Å—Ç—Ä–æ–∫) | ‚≠ê‚≠ê |
| 4 | `bodies/views.py` | ‚úèÔ∏è –û–±–Ω–æ–≤–∏—Ç—å | –í–µ—Å—å —Ñ–∞–π–ª (~60 —Å—Ç—Ä–æ–∫) | ‚≠ê‚≠ê |
| 5 | `bodies/admin.py` | ‚úèÔ∏è –û–±–Ω–æ–≤–∏—Ç—å | –í–µ—Å—å —Ñ–∞–π–ª (~30 —Å—Ç—Ä–æ–∫) | ‚≠ê‚≠ê |
| 6 | `bodies/urls.py` | üìÑ –°–æ–∑–¥–∞—Ç—å | ~10 —Å—Ç—Ä–æ–∫ | ‚≠ê |
| 7 | `bodies/management/__init__.py` | üìÑ –°–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç–æ | 0 —Å—Ç—Ä–æ–∫ | ‚≠ê |
| 8 | `bodies/management/commands/__init__.py` | üìÑ –°–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç–æ | 0 —Å—Ç—Ä–æ–∫ | ‚≠ê |
| 9 | `bodies/management/commands/import_products.py` | üìÑ –°–æ–∑–¥–∞—Ç—å | ~50 —Å—Ç—Ä–æ–∫ | ‚≠ê‚≠ê |
| 10 | `bodies/templates/products.html` | üìÑ –°–æ–∑–¥–∞—Ç—å | ~70 —Å—Ç—Ä–æ–∫ | ‚≠ê‚≠ê |
| 11 | `bodies/templates/login.html` | üìÑ –°–æ–∑–¥–∞—Ç—å | ~50 —Å—Ç—Ä–æ–∫ | ‚≠ê |
| 12 | `bodies/templates/register.html` | üìÑ –°–æ–∑–¥–∞—Ç—å | ~50 —Å—Ç—Ä–æ–∫ | ‚≠ê |
| 13 | `bodies/templates/order_list.html` | üìÑ –°–æ–∑–¥–∞—Ç—å | ~80 —Å—Ç—Ä–æ–∫ | ‚≠ê‚≠ê |

---

## ‚è±Ô∏è –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è

- **–û–±–Ω–æ–≤–∏—Ç—å 5 —Ñ–∞–π–ª–æ–≤:** 30-40 –º–∏–Ω—É—Ç
- **–°–æ–∑–¥–∞—Ç—å 8 —Ñ–∞–π–ª–æ–≤:** 40-50 –º–∏–Ω—É—Ç
- **–í—Å–µ–≥–æ:** ~1.5 —á–∞—Å–∞ –Ω–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞

---

## üîÑ –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤–∞–∂–Ω–æ!)

1. **–°–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–∏—Ç—å:**
   - `back/settings.py` (Database + INSTALLED_APPS)
   - `back/urls.py` (include bodies.urls)

2. **–ü–æ—Ç–æ–º —Å–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏:**
   - `bodies/models.py` (–æ–±–Ω–æ–≤–∏—Ç—å)
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `makemigrations` + `migrate`

3. **–ü–æ—Ç–æ–º –æ—Å—Ç–∞–ª—å–Ω–æ–µ:**
   - `bodies/admin.py` (–æ–±–Ω–æ–≤–∏—Ç—å)
   - `bodies/urls.py` (—Å–æ–∑–¥–∞—Ç—å)
   - `bodies/views.py` (–æ–±–Ω–æ–≤–∏—Ç—å)
   - `bodies/templates/**` (—Å–æ–∑–¥–∞—Ç—å 4 HTML —Ñ–∞–π–ª–∞)
   - `bodies/management/` (—Å–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É import)

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
   - `python manage.py check`
   - `python manage.py runserver`

---

–§–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤: **`d:\Test_Django_1\back\FILES_GUIDE.md`**
